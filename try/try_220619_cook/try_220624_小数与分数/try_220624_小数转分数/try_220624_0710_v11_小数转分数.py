import math

from SearchPath import *
from try_Using_æœ€å¤§å…¬çº¦æ•° import *
from try_Using_åˆ†æ•°ç›¸åŠ å‡ import *


def æœ‰é™å°æ•°è½¬åˆ†æ•°(å°æ•°):
    æ•´æ•°éƒ¨åˆ†=int(å°æ•°)
    å°æ•°ä½æ•°=len(str(å°æ•°))-len(str(æ•´æ•°éƒ¨åˆ†))-1
    if å°æ•°ä½æ•°<1 or å°æ•°==æ•´æ•°éƒ¨åˆ†:raise ValueError("âŒä½ è¿™ä¸æ˜¯å°æ•°")


    åˆ†æ•°åˆ†éƒ¨ä¹‹åˆ†æ¯=10**å°æ•°ä½æ•°
    
#a=3.36
#b=str(a).split["."]
#b[1]
    å°æ•°éƒ¨åˆ†=å°æ•°*åˆ†æ•°åˆ†éƒ¨ä¹‹åˆ†æ¯-æ•´æ•°éƒ¨åˆ†*åˆ†æ•°åˆ†éƒ¨ä¹‹åˆ†æ¯
    åˆ†æ•°åˆ†éƒ¨ä¹‹åˆ†å­=int(å°æ•°éƒ¨åˆ†)
    	
  
    çº¦åˆ†åçš„åˆ†å­,æœ€ç»ˆåˆ†æ¯=åˆ†æ•°çº¦åˆ†((åˆ†æ•°åˆ†éƒ¨ä¹‹åˆ†å­,åˆ†æ•°åˆ†éƒ¨ä¹‹åˆ†æ¯))
    #æ ¹æ®åˆ†æ•°æ•´éƒ¨åˆ†å­å˜åŒ–
    æœ€ç»ˆåˆ†å­=æ•´æ•°éƒ¨åˆ†*æœ€ç»ˆåˆ†æ¯+çº¦åˆ†åçš„åˆ†å­
    æœ€ç»ˆåˆ†æ•°=f"{æœ€ç»ˆåˆ†å­}/{æœ€ç»ˆåˆ†æ¯}"
    
    return æœ€ç»ˆåˆ†æ•°


def æ— é™å¾ªç¯å°æ•°è½¬åˆ†æ•°_æ‹†è§£(æ— é™å¾ªç¯å°æ•°,å¾ªç¯ä½“é•¿åº¦=1):
    å¾ªç¯ä½“=str(æ— é™å¾ªç¯å°æ•°)[-å¾ªç¯ä½“é•¿åº¦:]
    
    a=æ— é™å¾ªç¯å°æ•°
        
    #å–å‡ºaçš„æ•´æ•°éƒ¨åˆ†å­˜è¿›
    b=int(a)
    input(f"\nå–å‡ºaçš„æ•´æ•°éƒ¨åˆ†å­˜è¿›b:{b}")
    print(f"ã€æ•´æ•°éƒ¨åˆ†:{b}ã€‘")
    
    #aä»å°æ•°ç‚¹ååˆ°é¦–æ¬¡å¾ªç¯ä½“ç»“æŸä½å…±nä½
    #å³açš„ä½¿ç”¨å°æ•°éƒ¨åˆ†å…±nä½
    n=len(str(a))-len(str(b))-1
    #n=len(str(a).split(".")[-1])
    input(f"aä»å°æ•°ç‚¹ååˆ°é¦–æ¬¡å¾ªç¯ä½“ç»“æŸä½å…±nä½: {n}")
    
    #å–å‡ºaçš„ä½¿ç”¨å°æ•°éƒ¨åˆ†çš„æ•´æ•°å½¢å¼å­˜è¿›c
    #ï¼ˆæˆ–å­—ç¬¦ä¸²å½¢å¼ï¼‰
    
    #cæ•´æ•°å½¢å¼ä¹‹æ•°å€¼è®¡ç®—æ³•ï¼ˆé»˜è®¤ï¼‰
    c=math.ceil(a*10**n-b*10**n)
    
    #cæ•´æ•°å½¢å¼ä¹‹å­—ç¬¦ä¸²åˆ‡ç‰‡æ³•
    #c=int(str(a).split(".")[-1])
    
    input(f"å–å‡ºaçš„ä½¿ç”¨å°æ•°éƒ¨åˆ†çš„æ•´æ•°å½¢å¼å­˜è¿›c: {c}")
    
    #å¾ªç¯ä½“çš„å­—ç¬¦ä¸²å½¢å¼ä¸ºdï¼ˆå¾ªç¯ä½“åº”å½“æ˜¯å­—ç¬¦ä¸²å½¢å¼ å› ä¸ºå­˜åœ¨å¤´ä½ä¸º0çš„æƒ…å†µï¼‰
    #è€Œä¸”ä¸‡ç‰©æœ¬è´¨åœ¨äºå­—ç¬¦ä¸²
    d=å¾ªç¯ä½“
    input(f"å¾ªç¯ä½“çš„å­—ç¬¦ä¸²å½¢å¼ä¸ºd: {repr(d)}")
    
    #é¦–æ¬¡å¾ªç¯ä½“ä¸å°æ•°ç‚¹ä¹‹é—´çš„ç©ºå³è·ç¦»å³ç©ºä½ä¸ºe
    e=int(n-å¾ªç¯ä½“é•¿åº¦)
    æ˜¯å¦æœ‰ç©ºä½=True if e else False
    input(f"é¦–æ¬¡å¾ªç¯ä½“ä¸å°æ•°ç‚¹ä¹‹é—´çš„ç©ºå³è·ç¦»å³ç©ºä½ä¸ºe: {e}")
   
    # ç”±ç©ºä½å¾—å‡ºçš„éœ€è¦ç¼©å°çš„å€æ•°ä¸ºfï¼ˆæ ¹æ®ç©ºä½eï¼‰
    # ç©ºéƒ¨ä¸è¢«å¡«æ—¶å¾ªç¯éƒ¨åˆ†éœ€è¦ç¼©å°çš„å€æ•°ï¼ˆä»è€Œä¸å¡«ç©ºï¼‰
    f=10**e
    input(f"éœ€è¦ç¼©å°çš„å€æ•°ä¸ºfï¼ˆæ ¹æ®eï¼‰: {f}")
    
    
    # ç©ºéƒ¨ä¸è¢«å¡«æ—¶å¾ªç¯éƒ¨åˆ†éœ€è¦å‡å°çš„æ•°å€¼çš„åˆ†æ•°å½¢å¼ï¼ˆä»è€Œä¸å¡«ç©ºï¼‰
    # è¿™æ—¶å¯èƒ½å¢åŠ ç©ºï¼ˆæ•…ä¸æ¨èç”¨ï¼‰
    f_substract="%s/%s"%(int(å¾ªç¯ä½“),f) if æ˜¯å¦æœ‰ç©ºä½ else "0"
    input("ç©ºéƒ¨ä¸è¢«å¡«æ—¶å¾ªç¯éƒ¨åˆ†éœ€è¦å‡å°çš„æ•°å€¼çš„åˆ†æ•°å½¢å¼ä¸ºf_substract:"
    	f"{repr(f_substract)}")
    
    # f_substractçš„æœ€ç®€åˆ†æ•°å½¢å¼
    f_substract=è·å–æœ€ç®€åˆ†æ•°(f_substract) if æ˜¯å¦æœ‰ç©ºä½ else "0"
    input(f"f_substractçš„æœ€ç®€åˆ†æ•°å½¢å¼: {repr(f_substract)}")
    
    
    #ç”±å¾ªç¯ä½“å¾—åˆ°çš„åˆ†æ•°éƒ¨åˆ†çš„å­—ç¬¦ä¸²å½¢å¼ä¸ºg
    g=f"{å¾ªç¯ä½“}/{str(9)*å¾ªç¯ä½“é•¿åº¦}"
    input(f"ç”±å¾ªç¯ä½“å¾—åˆ°çš„åˆ†æ•°éƒ¨åˆ†çš„å­—ç¬¦ä¸²å½¢å¼ä¸ºg: {repr(g)}")
   	
    g=è·å–æœ€ç®€åˆ†æ•°(g)
    input(f"gçš„æœ€ç®€åˆ†æ•°å½¢å¼ä¸ºg: {repr(g)}")
    print(f"ã€å¾ªç¯éƒ¨åˆ†:{g}ã€‘")
    
    #é¦–æ¬¡å¾ªç¯ä½“ä¸å°æ•°ç‚¹ä¹‹é—´çš„ç©ºéƒ¨æ‹†è§£å‡ºæ¥çš„æœ‰é™æ•´æ•°çš„æ•´æ•°å½¢å¼ä¸ºh
    #ï¼ˆæˆ–å­—ç¬¦ä¸²å½¢å¼ï¼‰    
    #hæ•´æ•°å½¢å¼ä¹‹ç›¸å‡æ³•ä¹‹å…¨ä½ï¼ˆé»˜è®¤ï¼‰
    h_æ•´æ•°å½¢å¼ä¹‹ç›¸å‡æ³•_å…¨ä½=int(c-int(å¾ªç¯ä½“))
    input("é¦–æ¬¡å¾ªç¯ä½“ä¸å°æ•°ç‚¹ä¹‹é—´çš„ç©ºéƒ¨æ‹†è§£å‡ºæ¥çš„æœ‰é™æ•´æ•°çš„æ•´æ•°å½¢å¼ä¸ºh\n"
    f"hæ•´æ•°å½¢å¼ä¹‹ç›¸å‡æ³•ä¹‹å…¨ä½: {h_æ•´æ•°å½¢å¼ä¹‹ç›¸å‡æ³•_å…¨ä½}")
    print("ã€%s-%sã€‘"%(c,å¾ªç¯ä½“)) 
    
    #hæ•´æ•°å½¢å¼ä¹‹ç›¸å‡æ³•    
    h=h_æ•´æ•°å½¢å¼ä¹‹ç›¸å‡æ³•=(c-int(d))//(10**å¾ªç¯ä½“é•¿åº¦)
    input(f"hæ•´æ•°å½¢å¼ä¹‹ç›¸å‡æ³•ï¼ˆé»˜è®¤ï¼‰: {h}")
    print("ã€(%s-%s)//%sã€‘"%(c,å¾ªç¯ä½“,10**å¾ªç¯ä½“é•¿åº¦)) 
     
    #hæ•´æ•°å½¢å¼ä¹‹æ•°å€¼æˆªå–æ³•ï¼ˆä¸ä¹‹ä¸åŒ å­—ç¬¦ä¸²æˆªå–æ³•æ˜¯åˆ‡ç‰‡ï¼‰
    #å¾ªç¯ä½“é•¿åº¦ç­‰äºn-e
    h_æ•´æ•°å½¢å¼ä¹‹æ•°å€¼æˆªå–æ³•=c//(10**(n-e))
    input(f"hæ•´æ•°å½¢å¼ä¹‹æ•°å€¼æˆªå–æ³•: {h_æ•´æ•°å½¢å¼ä¹‹æ•°å€¼æˆªå–æ³•}")
    print("ã€%sä»å¤´å‘å°¾åªç•™%sä½ã€‘"%(c,e))
    
    #hæ•´æ•°å½¢å¼ä¹‹å­—ç¬¦ä¸²åˆ‡ç‰‡æ³•
    #h=int(str(c)[:-e])
    
    #ç©ºéƒ¨æ‹†è§£å‡ºæ¥çš„æ•´æ•°å½¢å¼hè¿›è¡Œè¿˜åŸ
    #æ–¹æ³•æ˜¯ä»¥hä½œä¸ºåˆ†å­ åˆ†æ¯ä¸º10çš„næ¬¡æ–¹ å¾—åˆ°è¿™æ ·çš„åˆ†æ•°å½¢å¼
    #ç„¶åå¾—åˆ°è¿™åˆ†æ•°çš„æœ€ç®€åˆ†æ•°å½¢å¼çš„å­—ç¬¦ä¸²å½¢å¼
    #ä»è€Œè¿˜åŸä¸ºi
    
    #å½“ä½¿ç”¨hæ•´æ•°å½¢å¼ä¹‹ç›¸å‡æ³•ä¹‹å…¨ä½æ¥è¿›è¡Œè¿˜åŸä¸ºi
    i_ç›¸å‡æ³•_å…¨ä½=f"{h_æ•´æ•°å½¢å¼ä¹‹ç›¸å‡æ³•_å…¨ä½}/{10**n}" if h!=0 else "0"
    input(f"ç©ºéƒ¨æ‹†è§£å‡ºæ¥çš„æ•´æ•°å½¢å¼hè¿›è¡Œè¿˜åŸä¸ºi\n"
    f"iå­—ç¬¦ä¸²å½¢å¼ä¹‹å½“hä½¿ç”¨ç›¸å‡æ³•ä¹‹å…¨ä½: {repr(i_ç›¸å‡æ³•_å…¨ä½)}")

    #å½“ä½¿ç”¨hæ•´æ•°å½¢å¼ä¹‹ç›¸å‡æ³•æ¥è¿›è¡Œè¿˜åŸä¸ºiï¼ˆé»˜è®¤ï¼‰
    i=i_ç›¸å‡æ³•=f"{h}/{f}" if h!=0 else "0"
    input(f"iå­—ç¬¦ä¸²å½¢å¼ä¹‹å½“hä½¿ç”¨ç›¸å‡æ³•ï¼ˆé»˜è®¤ï¼‰: {repr(i)}")
        
    #å½“ä½¿ç”¨hæ•´æ•°å½¢å¼ä¹‹æ•°å€¼æˆªå–æ³•æ¥è¿›è¡Œè¿˜åŸä¸ºi
    i_æ•°å€¼æˆªå–æ³•="%s/%s"%(h_æ•´æ•°å½¢å¼ä¹‹æ•°å€¼æˆªå–æ³•,f)\
if h_æ•´æ•°å½¢å¼ä¹‹æ•°å€¼æˆªå–æ³•!=0 else "0"
    input(f"iå­—ç¬¦ä¸²å½¢å¼ä¹‹å½“hä½¿ç”¨æ•°å€¼æˆªå–æ³•: {repr(i_æ•°å€¼æˆªå–æ³•)}")
        
    i=è·å–æœ€ç®€åˆ†æ•°(i) if h!=0 else "0"
    input(f"ç©ºéƒ¨hè¿˜åŸæˆçš„åˆ†æ•°çš„æœ€ç®€åˆ†æ•°å½¢å¼çš„å­—ç¬¦ä¸²å½¢å¼ä¸ºi: {repr(i)}")
    print(f"ã€ç©ºéƒ¨:{i}ã€‘")
    
    # ç©ºéƒ¨è¢«å¡«ä¸ºj
    # ä½¿ç”¨é¢å¤–å‡½æ•°çš„æ–¹æ³•
    j=åˆ†æ•°ç›¸åŠ å‡(i,f_substract,"-") if æ˜¯å¦æœ‰ç©ºä½ else "0"
    input(f"ç©ºéƒ¨è¢«å¡«ä¸ºjï¼ˆå·²åŒ–ç®€ï¼‰ï¼ˆéæˆ‘å“²å­¦æ³•ï¼‰: {repr(j)}")
    
    # ç¬¦åˆæˆ‘å“²å­¦çš„ ä¸ä½¿ç”¨é¢å¤–å‡½æ•°çš„æ–¹æ³•
    j="%s/%s"%(h-int(å¾ªç¯ä½“),f) if æ˜¯å¦æœ‰ç©ºä½ else "0"
    input(f"ç©ºéƒ¨è¢«å¡«ä¸ºjï¼ˆæœªåŒ–ç®€ï¼‰ï¼ˆæ˜¯æˆ‘å“²å­¦æ³•ï¼‰: {repr(j)}")
    
    # jçš„æœ€ç®€åˆ†æ•°å½¢å¼
    j=è·å–æœ€ç®€åˆ†æ•°(j) if æ˜¯å¦æœ‰ç©ºä½ else "0"
    input(f"jçš„æœ€ç®€åˆ†æ•°å½¢å¼ï¼ˆæ˜¯æˆ‘å“²å­¦æ³•ï¼‰: {repr(j)}")
    
    return (b,i,g),(f,f_substract,j)
    
    
def æ— é™å¾ªç¯å°æ•°è½¬åˆ†æ•°(æ— é™å¾ªç¯å°æ•°,å¾ªç¯ä½“é•¿åº¦=1):
    #0.8333...=0.5+0.333...
    
    åŸºç¡€,é™„åŠ =æ— é™å¾ªç¯å°æ•°è½¬åˆ†æ•°_æ‹†è§£(æ— é™å¾ªç¯å°æ•°,å¾ªç¯ä½“é•¿åº¦)
    
    æ•´æ•°éƒ¨åˆ†,ç©ºéƒ¨,å¾ªç¯éƒ¨åˆ†=åŸºç¡€
    ç©ºéƒ¨ä¸å¡«_å€æ•°ç¼©å°,ç©ºéƒ¨ä¸å¡«_æ•°å€¼å‡å°,ç©ºéƒ¨è¢«å¡«=é™„åŠ 
    
    result_ç©ºéƒ¨ä¸å¡«_æ•°å€¼å‡å°=result_ç©ºéƒ¨ä¸å¡«_å€æ•°ç¼©å°=\
    result_ç©ºéƒ¨ä¸å¡«_æ¨¡æ¿="%s+%s+%s"%(æ•´æ•°éƒ¨åˆ†,ç©ºéƒ¨,å¾ªç¯éƒ¨åˆ†)
    
    result_ç©ºéƒ¨ä¸å¡«_å€æ•°ç¼©å°+="/%s"%(ç©ºéƒ¨ä¸å¡«_å€æ•°ç¼©å°)
    result_ç©ºéƒ¨ä¸å¡«_æ•°å€¼å‡å°+="-%s"%(ç©ºéƒ¨ä¸å¡«_æ•°å€¼å‡å°)
    result_ç©ºéƒ¨è¢«å¡«="%s+%s+%s"%(æ•´æ•°éƒ¨åˆ†,ç©ºéƒ¨è¢«å¡«,å¾ªç¯éƒ¨åˆ†)
    
    description=(
    	"æ–¹æ³•ä¸€ï¼ˆç©ºéƒ¨ä¸å¡«ä¹‹å€æ•°ç¼©å°æ³•ï¼‰:",
    	"æ–¹æ³•äºŒï¼ˆç©ºéƒ¨ä¸å¡«ä¹‹æ•°å€¼å‡å°æ³•ï¼‰:",
    	"æ–¹æ³•ä¸‰ï¼ˆç©ºéƒ¨è¢«å¡«æ³•ï¼‰ï¼ˆæ¨èï¼‰:",
    	)
    
    æ•´åˆ=zip(description,(
    	           result_ç©ºéƒ¨ä¸å¡«_å€æ•°ç¼©å°,
    		          result_ç©ºéƒ¨ä¸å¡«_æ•°å€¼å‡å°,
    		          result_ç©ºéƒ¨è¢«å¡«,
    		          ))
    		
    return æ•´åˆ


def è®¾ç½®ä½ çš„å¾ªç¯ä½“é•¿åº¦ç•Œé¢():
    å¾ªç¯ä½“é•¿åº¦=1
    while True:
        ç­”=input("\nè®¾ç½®ä½ çš„å¾ªç¯ä½“é•¿åº¦(Enter:é»˜è®¤å€¼)(é»˜è®¤å€¼:1):")
        if not ç­”:break       
        try:å¾ªç¯ä½“é•¿åº¦=int(ç­”)
        except:continue
        if å¾ªç¯ä½“é•¿åº¦<0:
            print("âŒå¾ªç¯ä½“é•¿åº¦ä¸èƒ½å°äº0")
            continue
        break
        
    return å¾ªç¯ä½“é•¿åº¦


def é—®ä½ çš„å°æ•°ç•Œé¢():
    while True:
        try:ä½ çš„å°æ•°=float(input("\nä½ çš„å°æ•°æ˜¯ï¼Ÿ\nç­”:"))
        except:continue
        break
        
    return ä½ çš„å°æ•°

def ç»™å‡ºè§£ç­”ç•Œé¢(ä½ çš„å°æ•°,å¾ªç¯ä½“é•¿åº¦):        
    try:print("\n%sçš„åˆ†æ•°å½¢å¼æ˜¯%s"%(ä½ çš„å°æ•°,æœ‰é™å°æ•°è½¬åˆ†æ•°(ä½ çš„å°æ•°)))
    except Exception as e:
        print(e)
        return
        
    if å¾ªç¯ä½“é•¿åº¦:
        print("\n%s%s...çš„åˆ†æ•°å½¢å¼æ˜¯"%(ä½ çš„å°æ•°,str(ä½ çš„å°æ•°)[-å¾ªç¯ä½“é•¿åº¦:]*2))
        for k,v in æ— é™å¾ªç¯å°æ•°è½¬åˆ†æ•°(ä½ çš„å°æ•°,å¾ªç¯ä½“é•¿åº¦):
            print(k,v)


def æ˜¯å¦é€€å‡ºå½“å‰ç•Œé¢():
    if input("\n#Q/q to quit: ").lower()=="q":
        return True
    return False


def è¯•ç”¨():
    #print(åˆ†æ•°ç›¸åŠ å‡([1,5],[1,108],"-"))
    #input()
    
    å¾ªç¯ä½“é•¿åº¦=è®¾ç½®ä½ çš„å¾ªç¯ä½“é•¿åº¦ç•Œé¢()
    while True:   
        while True:
            ä½ çš„å°æ•°=é—®ä½ çš„å°æ•°ç•Œé¢()
            ç»™å‡ºè§£ç­”ç•Œé¢(ä½ çš„å°æ•°,å¾ªç¯ä½“é•¿åº¦)
            if æ˜¯å¦é€€å‡ºå½“å‰ç•Œé¢():break
            
        å¾ªç¯ä½“é•¿åº¦=è®¾ç½®ä½ çš„å¾ªç¯ä½“é•¿åº¦ç•Œé¢()
        if æ˜¯å¦é€€å‡ºå½“å‰ç•Œé¢():break


def åˆå§‹ç•Œé¢():
    while True:
        input("\nğŸ˜‹\nè¿™é‡Œæ˜¯åˆå§‹ç•Œé¢")
        if æ˜¯å¦é€€å‡ºå½“å‰ç•Œé¢():break
        è¯•ç”¨()

        
def main():
    åˆå§‹ç•Œé¢()



if __name__=="__main__":main()


#625/3276=1/5+1/108+...

#updated: 2022.7.10 18:46~
#ã€Štry_220624_0710_v11_å°æ•°è½¬åˆ†æ•°.pyã€‹

#updated: 2022.7.17 0:36~1:52
#ã€Štry_220624_0717_v12_å°æ•°è½¬åˆ†æ•°.pyã€‹
